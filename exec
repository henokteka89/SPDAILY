EXEC sp_Daily CPU, @uptime = 500, @both = 2;
--EXEC sp_Daily 1, @blocking = 1 --Check CPU, BLOCKING . @both = 0 for both, 1 for first one, 2 for second

EXEC admin.sp_blockingdetailtracktransactions;

EXEC admin.sp_monitorregressedplans 0 --0 all regressed, 1 mild regressed, 2 too regressed

EXEC sp_Daily recompile, @procname = 'usp_SpecimenResults_Find_Results' --RECOMPILE stored procs

EXEC sp_Daily helptext, @procname = 'Udf_Get_Physical_StatusId' --GET TEXT text of objects

EXEC sp_Daily 31, @procname = 'usp_MyEscreen_V3_Sched_SelEvents_ByApplicant' --Get parameters from profiler

EXEC sp_Daily 4, @planid = 24855937 -- BEWARE REMOVING

EXEC sp_Daily 4, @queryid = 57844497 -- BEWARE REMOVING

EXEC sp_Daily unforceplanid, @queryid = 53933316
-- BEWARE REMOVING — REMOVE: Planid targets a specific plan within a queryid; queryid applies to all planids under it

-- (Get planid and details using quickie or Blitz tool; @blitzcache = 1 triggers Blitz, otherwise it uses quickiestore)

EXEC sp_Daily 51, @text = '%WHERE clientid = @ClientIdParameter%' 
-- Extract planid from query text, especially useful for dynamic stored procedures

EXEC sp_Daily 61, @HOUR = 2 
-- Find timeout or aborted queries in the specified hour

EXEC sp_Daily 7, @tablename = 'specimen' 
-- Analyze index usage for the specified table

EXEC sp_Daily 8, @queryid = 38285587, @hint = 'Loop Join', 
    @procname = 'usp_ePhysicals_Is_ePhysicals_Eligible', @removehint = 0 
-- Apply query hint (e.g., Loop Join); set @removehint = 1 to remove the hint

EXEC sp_Daily 9/*1*/, @queryid = 5566; 
EXEC sp_Daily 91, @queryid = 5343
-- Automatic Tuning Recommendation (9) and Get PROC Name based on QUERY_ID (91) — Query Store recommendation

EXEC sp_Daily 10, @procname = 'procname' 
-- Check permission on specified stored procedure

EXEC sp_scriptoutindex @indexname = 'op_id', @tablename = 'collections', @dbname = 'escreen'

USE cc;
DBCC inputbuffer (528)

EXEC admin.sp_showparametervaluesfromxml @xml = '' 
-- Extracts parameter values from XML

-- Monitor daily job — Long-running

EXEC admin.sp_WhoIsActive @format_output = 01


/*
USE cc;

EXEC sys.sp_query_store_set_hints @query_id = id, 
    @query_hints = N'OPTION(Loop Join)';

EXEC sys.sp_query_store_clear_hints @query_id = id;

SELECT query_id, query_hint_text 
FROM sys.query_store_query_hints 
WHERE query_id = id;

SELECT * 
FROM admin.dbo.procstofollowdaily 
ORDER BY logdate DESC;

INSERT INTO admin.dbo.procstofollowdaily
-- (procname, note, query_id) 
-- VALUES ('procname', 'Plan with seek and lookup is good and forced', 22)

SELECT * 
FROM admin.dbo.QueryHints 
-- WHERE query OR procname LIKE '%inbox%' 
-- ORDER BY logdate DESC;

DECLARE @query_id INT = 5506;
SELECT query_id, 
    'EXEC sp_query_store_remove_plan ' + CONVERT(VARCHAR, plan_id)
FROM sys.query_store_plan 
WHERE query_id = @query_id;
*/